<!-- Other methods removed but it can be seen in full in file views/account/PublicProfile.cshtml -->

@model TextBooks.Models.PublicProfileViewModel

<!-- Button trigger for modal -->
    <button type="button" class="btn btn-default btn-transparent" data-toggle="modal" data-target="#myModal">
    Send Email
</button>


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <!--Get the user's name so that it can show up the top of the modal-->
                @{
                string toUserFullName = Model.targetUser.FirstName + " " + Model.targetUser.LastName;
                }
                <h4 class="modal-title" id="myModalLabel">Contact @toUserFullName</h4>
            </div>
            <div class="modal-body">
            <!-- This was originally just an input field but was edited/updated by another team member -->
                @using (Html.BeginForm("ContactUser", "Account", new { toUsername = Model.targetUser.UserName }, FormMethod.Post, new { id = "modal-form" }))
                {
                    <p>Hi @Model.targetUser.FirstName,</p>
                    <!--This is where the user types in their message-->
                    @Html.TextAreaFor(model => model.contactEmail.message,
                        new { @class = "form-control col-md-12",
                            @style = "min-width: 100%",
                            @placeholder = "Type your message for " + Model.targetUser.FirstName + " here.",
                            @rows ="8"})
                }
            </div>
            <div class="modal-footer">
                <!--Cancel and submit buttons-->
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <input id="btn-submit" class="btn btn-primary" type="submit" value="Send Message" />
                <script type="text/javascript">
                    document.getElementById("btn-submit").onclick = function () {
                        var form = document.getElementById("modal-form");
                        form.submit();
                    }
                </script>
            </div>
        </div>
    </div>
</div>
